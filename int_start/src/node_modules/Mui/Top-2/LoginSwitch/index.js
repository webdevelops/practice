import React, { useState, useEffect } from 'react'
import { FormGroup, FormControlLabel, Switch } from '@material-ui/core';
import { withRouter } from 'react-router-dom'

import useStyles from '../styles'

const LoginSwitch = ({ history }) => {
  const classes = useStyles();
  const [login, setLogin] = useState(false)

  useEffect(() => {
    console.log("TCL: LoginSwitch -> login", login)
    console.log("TCL: LoginSwitch -> history", history)
    if (login) {
      history.push('/sign-in')
      console.log("TCL: LoginSwitch -> history.push('/sign-in')", history.push('/sign-in'))
    }
    history.push('/')
  }, [login, history])

  const handleChange = event => {
    // if (login) {
    //   history.push('/sign-in')
    // }
    // // history.push('/')
    setLogin(event.target.checked)
    
  } 

  const toggle = (
    <Switch
      checked={login}
      onChange={handleChange}
      aria-label='login switch'
    />
  )

  // const handleClick = () => {
  //   console.log("TCL: handleClick -> login", login)
  //   if (login) {
  //     history.push('/sign-in')
  //   }
  //   history.push('/')
  // }

  return (
    <FormGroup>
      <FormControlLabel
        control={toggle}
        label={login ? 'Logout' : 'Login'}
        className={classes.label}
        // onClick={handleClick}
      />
    </FormGroup>
  )
}

export default withRouter(LoginSwitch)